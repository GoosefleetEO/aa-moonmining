{% extends 'allianceauth/base.html' %}
{% load i18n %}
{% block page_title %}{% trans 'Moon Planner' %}{% endblock %}
{% load static %}

{% block content %}
    <div class="col-lg-12">
        <br>
        {% include 'moonplanner/partials/menu.html' %}

        <ul class="nav nav-pills"  role="tablist">
            <li role="presentation" class="active"><a href="#upcoming" aria-controls="upcoming" role="tab" data-toggle="tab">Upcoming Extractions</a></li>
            <li role="presentation"><a href="#recent" aria-controls="recent" role="tab" data-toggle="tab">Recent Extractions</a></li>
        </ul>

        <div class="tab-content">
            <div role="tabpanel" class="tab-pane fade in active panel-default" id="upcoming">
                {% include "moonplanner/partials/extractions_table.html" with sub_title="Upcoming Extractions" tableid="tab_upcoming" extractions=exts %}
            </div>

            <div role="tabpanel" class="tab-pane fade panel-default" id="recent">
                {% include "moonplanner/partials/extractions_table.html" with sub_title="Recent Extractions" tableid="tab_recent" extractions=r_exts %}
            </div>
        </div>

        <p class="text-muted">All times displayed are EVE/UTC</p>

    </div>

{% endblock %}

{% block extra_javascript %}
    {% include 'bundles/datatables-js.html' %}
    <script type="text/javascript" src="{% static 'js/filterDropDown/filterDropDown.min.js' %}"></script>
    <script type="text/javascript">
        $(function() {
            $('#tab_upcoming').DataTable({
                order: [ [0, "asc"], [1, "asc"] ],

                columnDefs: [
                    { "orderable": false, "targets": [ 3 ] }
                ],
                filterDropDown: {
                    columns: [
                        {
                            idx: 2
                        }
                    ],
                    bootstrap: true,
                    autoSize: false
                }
            });
            $('#tab_recent').DataTable({
                order: [ [0, "asc"], [1, "asc"] ],

                columnDefs: [
                    { "orderable": false, "targets": [ 3 ] }
                ],
                filterDropDown: {
                    columns: [
                        {
                            idx: 2
                        }
                    ],
                    bootstrap: true,
                    autoSize: false
                }
            });
        });

    </script>
{% endblock %}

{% block extra_css %}
    {% include 'bundles/datatables-css.html' %}
{% endblock %}

{% block extra_script %}
{% endblock %}
